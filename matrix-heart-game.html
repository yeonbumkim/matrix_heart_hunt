<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-7890314542345467" crossorigin="anonymous"></script>
    <title>Matrix Heart Hunt - Mini Game</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            background: #000;
            font-family: 'Courier New', monospace;
            overflow: hidden;
            cursor: crosshair;
            height: 100vh;
            position: relative;
        }

        .matrix-container {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
            z-index: 1;
        }

        .matrix-char {
            position: absolute;
            font-weight: bold;
            text-shadow: 0 0 10px currentColor;
            animation: fall linear infinite;
            pointer-events: auto;
            cursor: pointer;
            transition: all 0.3s ease;
            user-select: none;
        }

        .matrix-char:hover {
            transform: scale(1.8);
            text-shadow: 0 0 25px currentColor;
        }

        @keyframes fall {
            0% {
                transform: translateY(-150px);
                opacity: 1;
            }
            85% {
                opacity: 1;
            }
            100% {
                transform: translateY(100vh);
                opacity: 0;
            }
        }

        .hacker-text {
            position: absolute;
            font-size: 16px;
            font-weight: bold;
            text-shadow: 0 0 15px currentColor;
            animation: float linear infinite;
            pointer-events: auto;
            cursor: pointer;
            transition: all 0.3s ease;
            z-index: 2;
            white-space: nowrap;
            user-select: none;
        }

        .hacker-text:hover {
            transform: scale(1.3);
            text-shadow: 0 0 30px currentColor;
        }

        .hacker-text.small {
            font-size: 12px;
        }

        .hacker-text.large {
            font-size: 20px;
        }

        @keyframes float {
            0% {
                transform: translateX(-300px) translateY(0px);
                opacity: 0;
            }
            8% {
                opacity: 1;
            }
            92% {
                opacity: 1;
            }
            100% {
                transform: translateX(calc(100vw + 300px)) translateY(-80px);
                opacity: 0;
            }
        }

        .vertical-text {
            position: absolute;
            font-size: 14px;
            font-weight: bold;
            text-shadow: 0 0 12px currentColor;
            animation: verticalFloat linear infinite;
            pointer-events: auto;
            cursor: pointer;
            transition: all 0.3s ease;
            z-index: 2;
            writing-mode: vertical-lr;
            text-orientation: mixed;
        }

        @keyframes verticalFloat {
            0% {
                transform: translateY(100vh) translateX(0px);
                opacity: 0;
            }
            10% {
                opacity: 1;
            }
            90% {
                opacity: 1;
            }
            100% {
                transform: translateY(-200px) translateX(50px);
                opacity: 0;
            }
        }

        .diagonal-text {
            position: absolute;
            font-size: 15px;
            font-weight: bold;
            text-shadow: 0 0 12px currentColor;
            animation: diagonalFloat linear infinite;
            pointer-events: auto;
            cursor: pointer;
            transition: all 0.3s ease;
            z-index: 2;
            transform-origin: center;
        }

        @keyframes diagonalFloat {
            0% {
                transform: translateX(-200px) translateY(100vh) rotate(-45deg);
                opacity: 0;
            }
            10% {
                opacity: 1;
            }
            90% {
                opacity: 1;
            }
            100% {
                transform: translateX(100vw) translateY(-200px) rotate(-45deg);
                opacity: 0;
            }
        }

        /* 하트 애니메이션 */
        .heart {
            position: absolute;
            font-size: 48px;
            color: #ff1493;
            text-shadow: 0 0 30px #ff1493, 0 0 60px #ff1493, 0 0 90px #ff1493;
            animation: heartFloat linear infinite;
            pointer-events: auto;
            cursor: pointer;
            transition: all 0.2s ease;
            z-index: 50;
            user-select: none;
            background: rgba(255, 20, 147, 0.1);
            border-radius: 50%;
            padding: 10px;
            border: 2px solid rgba(255, 20, 147, 0.3);
        }

        .heart:hover {
            transform: scale(1.3);
            text-shadow: 0 0 40px #ff1493, 0 0 80px #ff1493, 0 0 120px #ff1493;
            background: rgba(255, 20, 147, 0.2);
            border-color: rgba(255, 20, 147, 0.5);
        }

        .heart.clicked {
            animation: heartPop 0.5s ease-out;
            pointer-events: none;
        }

        @keyframes heartFloat {
            0% {
                transform: translateY(10vh) scale(0.8);
                opacity: 0;
            }
            10% {
                opacity: 1;
                transform: translateY(25vh) scale(1);
            }
            30% {
                opacity: 1;
                transform: translateY(40vh) scale(1.1);
            }
            50% {
                opacity: 1;
                transform: translateY(50vh) scale(1);
            }
            70% {
                opacity: 1;
                transform: translateY(60vh) scale(1.1);
            }
            90% {
                opacity: 1;
                transform: translateY(75vh) scale(1);
            }
            100% {
                transform: translateY(85vh) scale(0.8);
                opacity: 0;
            }
        }

        @keyframes heartPop {
            0% {
                transform: scale(1);
                opacity: 1;
            }
            50% {
                transform: scale(2);
                opacity: 0.8;
            }
            100% {
                transform: scale(0);
                opacity: 0;
            }
        }

        .color-theme-1 { color: #00ff00; }
        .color-theme-2 { color: #00ffff; }
        .color-theme-3 { color: #ff0080; }
        .color-theme-4 { color: #ffff00; }
        .color-theme-5 { color: #ff4500; }
        .color-theme-6 { color: #9932cc; }
        .color-theme-7 { color: #00ff80; }
        .color-theme-8 { color: #ff6600; }
        .color-theme-9 { color: #ff1493; }
        .color-theme-10 { color: #00bfff; }

        .title {
            position: fixed;
            top: 20px;
            left: 50%;
            transform: translateX(-50%);
            color: #00ff00;
            font-size: 28px;
            font-weight: bold;
            text-shadow: 0 0 25px #00ff00;
            z-index: 10;
            text-align: center;
            letter-spacing: 3px;
        }

        .instructions {
            position: fixed;
            bottom: 20px;
            left: 50%;
            transform: translateX(-50%);
            color: #00ff00;
            font-size: 14px;
            text-shadow: 0 0 15px #00ff00;
            z-index: 10;
            text-align: center;
        }

        .status-bar {
            position: fixed;
            top: 70px;
            left: 20px;
            color: #00ff00;
            font-size: 12px;
            text-shadow: 0 0 10px #00ff00;
            z-index: 10;
            line-height: 1.5;
        }

        /* 점수판 */
        .scoreboard {
            position: fixed;
            top: 50%;
            right: 20px;
            transform: translateY(-50%);
            background: rgba(0, 0, 0, 0.8);
            border: 2px solid #ff1493;
            border-radius: 10px;
            padding: 20px;
            color: #ff1493;
            font-size: 14px;
            text-shadow: 0 0 10px #ff1493;
            z-index: 10;
            text-align: center;
            box-shadow: 0 0 20px rgba(255, 20, 147, 0.3);
            min-width: 180px;
        }

        .scoreboard h3 {
            margin-bottom: 15px;
            font-size: 18px;
            color: #ff1493;
            text-shadow: 0 0 15px #ff1493;
        }

        .score-item {
            margin: 8px 0;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .score-value {
            font-weight: bold;
            font-size: 16px;
        }

        .heart-icon {
            color: #ff1493;
            text-shadow: 0 0 10px #ff1493;
        }

        .game-over {
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background: rgba(0, 0, 0, 0.9);
            border: 3px solid #ff1493;
            border-radius: 15px;
            padding: 30px;
            color: #ff1493;
            font-size: 20px;
            text-shadow: 0 0 15px #ff1493;
            z-index: 20;
            text-align: center;
            display: none;
            box-shadow: 0 0 30px rgba(255, 20, 147, 0.5);
        }

        .game-over button {
            margin-top: 20px;
            padding: 10px 20px;
            background: rgba(255, 20, 147, 0.2);
            border: 2px solid #ff1493;
            color: #ff1493;
            font-family: 'Courier New', monospace;
            font-size: 14px;
            cursor: pointer;
            border-radius: 5px;
            text-shadow: 0 0 10px #ff1493;
            transition: all 0.3s ease;
        }

        .game-over button:hover {
            background: rgba(255, 20, 147, 0.4);
            box-shadow: 0 0 15px rgba(255, 20, 147, 0.5);
        }

        .restart-button {
            position: fixed;
            bottom: 20px;
            right: 20px;
            background: rgba(255, 20, 147, 0.2);
            color: #ff1493;
            border: 2px solid #ff1493;
            padding: 12px 24px;
            font-family: 'Courier New', monospace;
            font-size: 14px;
            font-weight: bold;
            cursor: pointer;
            border-radius: 8px;
            text-shadow: 0 0 10px #ff1493;
            box-shadow: 0 0 15px rgba(255, 20, 147, 0.3);
            transition: all 0.3s ease;
            z-index: 10;
            text-transform: uppercase;
        }

        .restart-button:hover {
            background: rgba(255, 20, 147, 0.4);
            box-shadow: 0 0 25px rgba(255, 20, 147, 0.5);
            transform: scale(1.05);
        }

        .restart-button:active {
            transform: scale(0.95);
        }

        .combo-indicator {
            position: fixed;
            top: 30%;
            left: 50%;
            transform: translateX(-50%);
            color: #ffff00;
            font-size: 24px;
            font-weight: bold;
            text-shadow: 0 0 20px #ffff00;
            z-index: 15;
            display: none;
            animation: comboFade 2s ease-out;
        }

        @keyframes comboFade {
            0% {
                opacity: 0;
                transform: translateX(-50%) scale(0.5);
            }
            50% {
                opacity: 1;
                transform: translateX(-50%) scale(1.2);
            }
            100% {
                opacity: 0;
                transform: translateX(-50%) scale(1);
            }
        }
    </style>
</head>
<body>
    <div class="title">MATRIX HEART HUNT</div>
    <div class="status-bar" id="statusBar">
        STATUS: HUNTING...<br>
        SECURITY: BYPASSED<br>
        CONNECTION: ENCRYPTED
    </div>
    <div class="instructions">CLICK PINK HEARTS FOR POINTS • BACKGROUND CLICK CHANGES COLORS</div>

    <!-- 점수판 -->
    <div class="scoreboard">
        <h3><span class="heart-icon">💖</span> SCORE <span class="heart-icon">💖</span></h3>
        <div class="score-item">
            <span>Hearts Caught:</span>
            <span class="score-value" id="heartScore">0</span>
        </div>
        <div class="score-item">
            <span>Total Score:</span>
            <span class="score-value" id="totalScore">0</span>
        </div>
        <div class="score-item">
            <span>Combo:</span>
            <span class="score-value" id="combo">0</span>
        </div>
        <div class="score-item">
            <span>Hearts Missed:</span>
            <span class="score-value" id="missedHearts">0</span>
        </div>
        <div class="score-item">
            <span>Accuracy:</span>
            <span class="score-value" id="accuracy">100%</span>
        </div>
        <div class="score-item">
            <span>High Score:</span>
            <span class="score-value" id="highScore">0</span>
        </div>
    </div>

    <!-- 콤보 표시 -->
    <div class="combo-indicator" id="comboIndicator"></div>

    <!-- 게임 오버 화면 -->
    <div class="game-over" id="gameOver">
        <h2>MISSION COMPLETE!</h2>
        <p>Final Score: <span id="finalScore">0</span></p>
        <p>Hearts Caught: <span id="finalHearts">0</span></p>
        <p>Best Combo: <span id="bestCombo">0</span></p>
        <button onclick="restartGame()">RESTART MISSION</button>
    </div>

    <!-- 재시작 버튼 -->
    <button class="restart-button" onclick="restartGame()">🔄 Restart</button>

    <div class="matrix-container" id="matrixContainer"></div>

    <script>
        // 게임 변수
        let gameState = {
            heartsCaught: 0,
            totalScore: 0,
            combo: 0,
            bestCombo: 0,
            missedHearts: 0,
            highScore: localStorage.getItem('matrixHeartHighScore') || 0,
            gameRunning: true
        };

        // 확장된 색상 테마
        const colorThemes = [
            '#00ff00', '#00ffff', '#ff0080', '#ffff00', '#ff4500',
            '#9932cc', '#00ff80', '#ff6600', '#ff1493', '#00bfff'
        ];

        let currentThemeIndex = 0;

        // 매트릭스 문자 세트
        const matrixChars = [
            '0', '1', '2', '3', '4', '5', '6', '7', '8', '9',
            'A', 'B', 'C', 'D', 'E', 'F', 'G', 'H', 'I', 'J',
            'K', 'L', 'M', 'N', 'O', 'P', 'Q', 'R', 'S', 'T',
            'U', 'V', 'W', 'X', 'Y', 'Z',
            '!', '@', '#', '$', '%', '^', '&', '*', '(', ')',
            '-', '_', '=', '+', '[', ']', '{', '}', '|', '\\',
            ':', ';', '"', "'", '<', '>', ',', '.', '?', '/',
            '~', '`', '№', '§', '±', '∞', '∑', '∆', '∏', '∫',
            '√', '≈', '≠', '≤', '≥', '÷', '×', '∂', '∇', '∴',
            '01', '10', '11', '00', 'A0', 'B1', 'C2', 'D3', 'E4', 'F5', 'FF', '00'
        ];

        // 해커 텍스트 (축약된 버전)
        const hackerTexts = [
            'ACCESSING MAINFRAME...', 'BYPASSING FIREWALL...', 'DECRYPTING DATA...',
            'ROOT ACCESS GRANTED', 'SYSTEM COMPROMISED', 'NEURAL NETWORK ACTIVE',
            'QUANTUM ENCRYPTION', 'CYBER BREACH DETECTED', 'MATRIX PROTOCOL',
            'DIGITAL FORTRESS', 'CODE INJECTION', 'PAYLOAD DELIVERED',
            'SHELL SPAWNED', 'BACKDOOR ACTIVE', 'NETWORK MAPPED',
            'DATABASE DUMPED', 'CREDENTIALS HARVESTED', 'EXPLOIT DEPLOYED',
            'VULNERABILITY FOUND', 'STEALTH MODE', 'MISSION COMPLETE',
            'nmap -sS target.com', 'sqlmap -u http://target', 'msfconsole',
            'john --wordlist hash.txt', 'hashcat -m 0 hash', 'aircrack-ng capture.cap',
            'BUFFER OVERFLOW', 'PRIVILEGE ESCALATION', 'REVERSE SHELL',
            'KEYLOGGER ACTIVE', 'PACKET SNIFFING', 'DNS SPOOFING',
            'ARP POISONING', 'SESSION HIJACK', 'XSS PAYLOAD',
            'SQL INJECTION', 'ZERO-DAY EXPLOIT', 'LATERAL MOVEMENT',
            'HEART TARGET DETECTED', 'LOVE VIRUS SPREADING', 'EMOTION.EXE RUNNING',
            'ROMANTIC PROTOCOL ACTIVE', 'VALENTINE BREACH', 'CUPID BACKDOOR'
        ];

        // 상태 메시지
        const statusMessages = [
            'STATUS: HUNTING HEARTS...',
            'STATUS: LOVE DETECTOR ACTIVE...',
            'STATUS: ROMANCE SCANNER ON...',
            'STATUS: EMOTION MINING...',
            'STATUS: HEART BREACH SUCCESS',
            'STATUS: CUPID PROTOCOL',
            'STATUS: VALENTINE HACK',
            'STATUS: LOVE TUNNEL OPEN'
        ];

        // 하트 생성
        function createHeart() {
            const heart = document.createElement('div');
            heart.className = 'heart';
            heart.textContent = '💖';

            // 화면 중앙 영역에 집중 배치 (좌우 20%-80% 영역)
            const centerBias = 0.8; // 중앙 편향을 더 높임
            let randomX;

            if (Math.random() < centerBias) {
                // 80% 확률로 중앙 영역 (화면의 20%-80%)
                randomX = (Math.random() * 0.6 + 0.2) * (window.innerWidth - 100);
            } else {
                // 20% 확률로 조금 더 넓은 중앙 영역 (화면의 15%-85%)
                randomX = (Math.random() * 0.7 + 0.15) * (window.innerWidth - 100);
            }

            // 최소/최대 경계 설정으로 사이드 배치 방지
            const minX = window.innerWidth * 0.15; // 좌측 15% 이후
            const maxX = window.innerWidth * 0.85 - 100; // 우측 15% 이전
            randomX = Math.max(minX, Math.min(maxX, randomX));

            heart.style.left = randomX + 'px';
            heart.style.top = '10vh'; // 상단 15% 영역 피하기 위해 10vh에서 시작
            heart.style.animationDuration = (Math.random() * 2 + 5) + 's'; // 5-7초로 조정 (더 빠르게)

            // 하트 클릭 이벤트
            heart.addEventListener('click', (e) => {
                e.stopPropagation();
                catchHeart(heart);
            });

            return heart;
        }

        // 하트 캐치
        function catchHeart(heart) {
            if (!gameState.gameRunning) return;

            heart.classList.add('clicked');
            gameState.heartsCaught++;
            gameState.combo++;

            // 점수 계산 (콤보 보너스)
            const baseScore = 100;
            const comboBonus = Math.floor(gameState.combo / 5) * 50;
            const points = baseScore + comboBonus;
            gameState.totalScore += points;

            // 베스트 콤보 업데이트
            if (gameState.combo > gameState.bestCombo) {
                gameState.bestCombo = gameState.combo;
            }

            // 콤보 표시
            if (gameState.combo >= 5 && gameState.combo % 5 === 0) {
                showCombo();
            }

            updateScoreboard();

            // 하트 제거
            setTimeout(() => {
                if (heart.parentNode) {
                    heart.parentNode.removeChild(heart);
                }
            }, 500);
        }

        // 콤보 표시
        function showCombo() {
            const comboIndicator = document.getElementById('comboIndicator');
            comboIndicator.textContent = `${gameState.combo}x COMBO!`;
            comboIndicator.style.display = 'block';

            setTimeout(() => {
                comboIndicator.style.display = 'none';
            }, 2000);
        }

        // 하트 놓침
        function missHeart() {
            gameState.missedHearts++;
            gameState.combo = 0; // 콤보 리셋
            updateScoreboard();
        }

        // 점수판 업데이트
        function updateScoreboard() {
            document.getElementById('heartScore').textContent = gameState.heartsCaught;
            document.getElementById('totalScore').textContent = gameState.totalScore;
            document.getElementById('combo').textContent = gameState.combo;
            document.getElementById('missedHearts').textContent = gameState.missedHearts;

            const totalAttempts = gameState.heartsCaught + gameState.missedHearts;
            const accuracy = totalAttempts > 0 ? Math.round((gameState.heartsCaught / totalAttempts) * 100) : 100;
            document.getElementById('accuracy').textContent = accuracy + '%';

            document.getElementById('highScore').textContent = gameState.highScore;

            // 하이스코어 업데이트
            if (gameState.totalScore > gameState.highScore) {
                gameState.highScore = gameState.totalScore;
                localStorage.setItem('matrixHeartHighScore', gameState.highScore);
            }
        }

        // 게임 재시작
        function restartGame() {
            // 기존 하이스코어는 보존
            const preservedHighScore = gameState.highScore;

            gameState = {
                heartsCaught: 0,
                totalScore: 0,
                combo: 0,
                bestCombo: 0,
                missedHearts: 0,
                highScore: preservedHighScore, // 기존 하이스코어 유지
                gameRunning: true
            };

            // 화면에 떠있는 하트들 모두 제거
            const existingHearts = document.querySelectorAll('.heart');
            existingHearts.forEach(heart => {
                if (heart.parentNode) {
                    heart.parentNode.removeChild(heart);
                }
            });

            // 게임 오버 화면 숨기기
            document.getElementById('gameOver').style.display = 'none';

            // 콤보 표시 숨기기
            document.getElementById('comboIndicator').style.display = 'none';

            updateScoreboard();

            // 재시작 버튼 시각적 피드백
            const restartButton = document.querySelector('.restart-button');
            restartButton.style.background = 'rgba(255, 20, 147, 0.5)';
            restartButton.style.transform = 'scale(0.95)';

            setTimeout(() => {
                restartButton.style.background = 'rgba(255, 20, 147, 0.2)';
                restartButton.style.transform = 'scale(1)';
            }, 200);
        }

        // 매트릭스 문자 생성
        function createMatrixChar() {
            const char = document.createElement('div');
            char.className = 'matrix-char';
            char.textContent = matrixChars[Math.floor(Math.random() * matrixChars.length)];
            char.style.left = Math.random() * 100 + 'vw';
            char.style.fontSize = (Math.random() * 25 + 10) + 'px';
            char.style.animationDuration = (Math.random() * 4 + 1.5) + 's';
            char.style.color = colorThemes[currentThemeIndex];

            char.addEventListener('click', (e) => {
                e.stopPropagation();
                changeColorTheme();
            });
            return char;
        }

        // 해커 텍스트 생성
        function createHackerText() {
            const text = document.createElement('div');
            const sizes = ['small', '', 'large'];
            const sizeClass = sizes[Math.floor(Math.random() * sizes.length)];

            text.className = 'hacker-text ' + sizeClass;
            text.textContent = hackerTexts[Math.floor(Math.random() * hackerTexts.length)];
            text.style.top = Math.random() * 85 + 5 + 'vh';
            text.style.animationDuration = (Math.random() * 6 + 7) + 's';
            text.style.color = colorThemes[currentThemeIndex];

            text.addEventListener('click', (e) => {
                e.stopPropagation();
                changeColorTheme();
            });
            return text;
        }

        // 세로 텍스트 생성
        function createVerticalText() {
            const text = document.createElement('div');
            text.className = 'vertical-text';
            text.textContent = hackerTexts[Math.floor(Math.random() * hackerTexts.length)];
            text.style.left = Math.random() * 90 + 5 + 'vw';
            text.style.animationDuration = (Math.random() * 8 + 6) + 's';
            text.style.color = colorThemes[currentThemeIndex];

            text.addEventListener('click', (e) => {
                e.stopPropagation();
                changeColorTheme();
            });
            return text;
        }

        // 대각선 텍스트 생성
        function createDiagonalText() {
            const text = document.createElement('div');
            text.className = 'diagonal-text';
            text.textContent = hackerTexts[Math.floor(Math.random() * hackerTexts.length)];
            text.style.animationDuration = (Math.random() * 10 + 8) + 's';
            text.style.color = colorThemes[currentThemeIndex];

            text.addEventListener('click', (e) => {
                e.stopPropagation();
                changeColorTheme();
            });
            return text;
        }

        // 색상 테마 변경
        function changeColorTheme() {
            currentThemeIndex = (currentThemeIndex + 1) % colorThemes.length;
            updateAllColors();
        }

        function randomColorTheme() {
            currentThemeIndex = Math.floor(Math.random() * colorThemes.length);
            updateAllColors();
        }

        function updateAllColors() {
            const allElements = document.querySelectorAll('.matrix-char, .hacker-text, .vertical-text, .diagonal-text, .title, .instructions, .status-bar');
            allElements.forEach(element => {
                element.style.color = colorThemes[currentThemeIndex];
                const shadowSize = element.classList.contains('title') ? '25px' :
                                 element.classList.contains('hacker-text') || element.classList.contains('vertical-text') || element.classList.contains('diagonal-text') ? '15px' :
                                 element.classList.contains('instructions') ? '15px' :
                                 element.classList.contains('status-bar') ? '10px' : '10px';
                element.style.textShadow = `0 0 ${shadowSize} ${colorThemes[currentThemeIndex]}`;
            });
        }

        // 상태 바 업데이트
        function updateStatusBar() {
            const statusBar = document.getElementById('statusBar');
            const randomStatus = statusMessages[Math.floor(Math.random() * statusMessages.length)];
            const connectionTypes = ['ENCRYPTED', 'TUNNELED', 'PROXIED', 'ANONYMOUS', 'SECURED'];
            const securityStates = ['BYPASSED', 'BREACHED', 'COMPROMISED', 'OVERRIDDEN', 'DISABLED'];

            statusBar.innerHTML = `
                ${randomStatus}<br>
                SECURITY: ${securityStates[Math.floor(Math.random() * securityStates.length)]}<br>
                CONNECTION: ${connectionTypes[Math.floor(Math.random() * connectionTypes.length)]}
            `;
        }

        // 애니메이션 시작 함수들
        function startMatrixRain() {
            const container = document.getElementById('matrixContainer');

            setInterval(() => {
                const char = createMatrixChar();
                container.appendChild(char);

                setTimeout(() => {
                    if (char.parentNode) {
                        char.parentNode.removeChild(char);
                    }
                }, 6000);
            }, 40); // 조금 더 여유있게
        }

        function startHackerTexts() {
            const container = document.getElementById('matrixContainer');

            setInterval(() => {
                const text = createHackerText();
                container.appendChild(text);

                setTimeout(() => {
                    if (text.parentNode) {
                        text.parentNode.removeChild(text);
                    }
                }, 15000);
            }, 1200); // 조금 더 여유있게
        }

        function startVerticalTexts() {
            const container = document.getElementById('matrixContainer');

            setInterval(() => {
                const text = createVerticalText();
                container.appendChild(text);

                setTimeout(() => {
                    if (text.parentNode) {
                        text.parentNode.removeChild(text);
                    }
                }, 16000);
            }, 3000);
        }

        function startDiagonalTexts() {
            const container = document.getElementById('matrixContainer');

            setInterval(() => {
                const text = createDiagonalText();
                container.appendChild(text);

                setTimeout(() => {
                    if (text.parentNode) {
                        text.parentNode.removeChild(text);
                    }
                }, 20000);
            }, 5000);
        }

        // 하트 생성 루프
        function startHeartGeneration() {
            const container = document.getElementById('matrixContainer');

            setInterval(() => {
                if (gameState.gameRunning) {
                    const heart = createHeart();
                    container.appendChild(heart);

                    // 하트가 화면을 벗어나면 놓친 것으로 처리
                    setTimeout(() => {
                        if (heart.parentNode && !heart.classList.contains('clicked')) {
                            missHeart();
                            heart.parentNode.removeChild(heart);
                        }
                    }, 7000); // 7초로 조정 (애니메이션 시간과 맞춤)
                }
            }, 1500); // 1.5초마다 하트 생성 (더 빈번하게)
        }

        // 초기화
        function init() {
            startMatrixRain();
            startHackerTexts();
            startVerticalTexts();
            startDiagonalTexts();
            startHeartGeneration();

            // 상태 바 업데이트
            setInterval(updateStatusBar, 4000);

            // 이벤트 리스너
            document.addEventListener('click', (e) => {
                // 하트나 UI 요소가 아닌 배경 클릭 시에만 색상 변경
                if (!e.target.closest('.heart, .scoreboard, .game-over, .restart-button, button')) {
                    changeColorTheme();
                }
            });

            document.addEventListener('keydown', (e) => {
                if (e.code === 'Space') {
                    e.preventDefault();
                    randomColorTheme();
                } else if (e.code === 'KeyR') {
                    restartGame();
                }
            });

            updateScoreboard();
        }

        // 페이지 로드 시 시작
        window.addEventListener('load', init);
    </script>
</body>
</html>
